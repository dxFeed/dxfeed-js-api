(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{HVoQ:function(e,t,n){"use strict";n.r(t),n.d(t,"_frontmatter",(function(){return o})),n.d(t,"default",(function(){return l}));var a=n("Fcif"),s=n("+I+c"),c=n("/FXl"),b=n("TjRS"),o=(n("aD51"),{});void 0!==o&&o&&o===Object(o)&&Object.isExtensible(o)&&!o.hasOwnProperty("__filemeta")&&Object.defineProperty(o,"__filemeta",{configurable:!0,value:{name:"_frontmatter",filename:"src/usage.mdx"}});var r={_frontmatter:o},i=b.a;function l(e){var t=e.components,n=Object(s.a)(e,["components"]);return Object(c.b)(i,Object(a.a)({},r,n,{components:t,mdxType:"MDXLayout"}),Object(c.b)("h1",{id:"nodejs-usage"},"NodeJS usage"),Object(c.b)("p",null,"Install ",Object(c.b)("inlineCode",{parentName:"p"},"cometd-nodejs-client")," package"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-sh"}),"npm install cometd-nodejs-client\n")),Object(c.b)("p",null,"and use it in your code"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"require('cometd-nodejs-client').adapt()\n// or\nimport * as CometdNodejsClient from 'cometd-nodejs-client'\nCometdNodejsClient.adapt()\n")),Object(c.b)("h1",{id:"basic-usage"},"Basic Usage"),Object(c.b)("p",null,"We have several classes in implementation:"),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},"Feed ",Object(c.b)("strong",{parentName:"li"},Object(c.b)("em",{parentName:"strong"},"(public)"))),Object(c.b)("li",{parentName:"ul"},"Endpoint ",Object(c.b)("strong",{parentName:"li"},Object(c.b)("em",{parentName:"strong"},"(private)"))),Object(c.b)("li",{parentName:"ul"},"Subscriptions ",Object(c.b)("strong",{parentName:"li"},Object(c.b)("em",{parentName:"strong"},"(private)")))),Object(c.b)("p",null,"The ",Object(c.b)("em",{parentName:"p"},"Feed")," is entry point for configuration and creating subscriptions.\n",Object(c.b)("em",{parentName:"p"},"Feed")," manages private classes for connecting and subscribing.\nThe ",Object(c.b)("em",{parentName:"p"},"Endpoint")," is responsible for managing the web socket connection.\n",Object(c.b)("em",{parentName:"p"},"Subscriptions")," for managing open subscriptions."),Object(c.b)("h2",{id:"import-package"},"Import package"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-ts"}),"import Feed from '@dxfeed/api'\n")),Object(c.b)("h2",{id:"configure--create-connection"},"Configure & Create connection"),Object(c.b)("p",null,"Create instance of Feed."),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-ts"}),"const feed = new Feed()\n")),Object(c.b)("p",null,"Provide auth token if needed."),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-ts"}),"feed.setAuthToken('authToken')\n")),Object(c.b)("p",null,"Set web socket address and open connection."),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-ts"}),"feed.connect('wss://demo.dxfeed.com/webservice/cometd')\n")),Object(c.b)("h2",{id:"configure--create-subscription"},"Configure & Create subscription"),Object(c.b)("p",null,"You should specify event types and symbol names."),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-ts"}),"feed.subscribe<{ value: number }>(\n  [EventType.Summary, EventType.Trade] /* event types */,\n  ['AEX.IND:TEI'] /* symbols */,\n  handleEvent\n)\n")),Object(c.b)("p",null,"For timed subscription you should also provide time to start subscription from."),Object(c.b)("p",null,"For Candle event type along with base symbol, you should specify an aggregation period. You can also set price type. More details: ",Object(c.b)("a",Object(a.a)({parentName:"p"},{href:"https://kb.dxfeed.com/display/DS/REST+API#RESTAPI-Candlesymbols"}),"https://kb.dxfeed.com/display/DS/REST+API#RESTAPI-Candlesymbols"),"."),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-ts"}),"feed.subscribeTimeSeries<{ value: number }>(\n  [EventType.Summary, EventType.Trade] /* event types */,\n  ['AEX.IND:TEI'] /* symbols */,\n  0 /* fromTime */,\n  handleEvent\n)\n")),Object(c.b)("p",null,"Last argument its event handler for process incoming events."),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-ts"}),"const handleEvent = (event) => {\n  /* process event */\n}\n")),Object(c.b)("h2",{id:"close-subscription"},"Close subscription"),Object(c.b)("p",null,"All subscribe methods return unsubscribe handler, you need to call this method for unsubscribe."),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-ts"}),"const unsubscribe = feed.subscribe(eventTypes, symbols, handleEvent)\n\nonExit(() => unsubscribe())\n")),Object(c.b)("h2",{id:"aggregated-api"},"Aggregated API"),Object(c.b)("h3",{id:"get-timeseries"},"Get TimeSeries"),Object(c.b)("p",null,"If you want to get TimeSeries events for a given time period, refer to example below."),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-ts"}),"// inside async function\nconst events = await feed.getTimeSeries(\n  'AAPL{=15m}',\n  EventType.Candle,\n  fromDate.getTime(),\n  toDate.getTime()\n)\n")),Object(c.b)("h3",{id:"subscribe-timeseries-snapshot"},"Subscribe TimeSeries snapshot"),Object(c.b)("p",null,"If you want to subscribe to TimeSeries events, refer to example below."),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-ts"}),"const unsubscribe = feed.subscribeTimeSeriesSnapshot('AAPL{=15m}', EventType.Candle, (candles) => {\n  // process candles\n  chart.setCandles(candles)\n})\n")),Object(c.b)("h2",{id:"close-connection"},"Close connection"),Object(c.b)("p",null,"If you need to close the web socket connection"),Object(c.b)("pre",null,Object(c.b)("code",Object(a.a)({parentName:"pre"},{className:"language-ts"}),"feed.disconnect()\n")))}void 0!==l&&l&&l===Object(l)&&Object.isExtensible(l)&&!l.hasOwnProperty("__filemeta")&&Object.defineProperty(l,"__filemeta",{configurable:!0,value:{name:"MDXContent",filename:"src/usage.mdx"}}),l.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-usage-mdx-7aaefe6bd81558f0b966.js.map